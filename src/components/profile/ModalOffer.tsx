import React from "react";
import { motion } from "framer-motion";
import Image from "next/image";

import type { OfferCardProps } from "./OfferCard";

// SocialIcon скопирован из OfferCard
function SocialIcon({ type }: { type: string }) {
  if (type === "instagram")
    return (
      <svg width="40" height="40" viewBox="0 0 36 36" fill="none"><rect width="36" height="36" rx="9" fill="url(#ig)"/><path d="M15.0041 18.0463C15.0041 16.3881 16.3476 15.0434 18.0054 15.0434C19.6632 15.0434 21.0074 16.3881 21.0074 18.0463C21.0074 19.7046 19.6632 21.0492 18.0054 21.0492C16.3476 21.0492 15.0041 19.7046 15.0041 18.0463ZM13.3812 18.0463C13.3812 20.601 15.4515 22.6718 18.0054 22.6718C20.5593 22.6718 22.6296 20.601 22.6296 18.0463C22.6296 15.4917 20.5593 13.4208 18.0054 13.4208C15.4515 13.4208 13.3812 15.4917 13.3812 18.0463ZM21.732 13.2374C21.7319 13.4512 21.7952 13.6602 21.9139 13.838C22.0325 14.0159 22.2013 14.1545 22.3987 14.2364C22.5961 14.3183 22.8134 14.3398 23.023 14.2981C23.2327 14.2565 23.4253 14.1536 23.5765 14.0025C23.7276 13.8514 23.8306 13.6588 23.8724 13.4492C23.9142 13.2395 23.8929 13.0221 23.8112 12.8246C23.7295 12.627 23.591 12.4582 23.4134 12.3393C23.2357 12.2205 23.0268 12.157 22.8131 12.1569H22.8126C22.5261 12.157 22.2514 12.2709 22.0488 12.4735C21.8462 12.6761 21.7322 12.9509 21.732 13.2374Z" fill="white"/><defs><linearGradient id="ig" x1="35.3081" y1="36" x2="-0.691919" y2="0" gradientUnits="userSpaceOnUse"><stop stopColor="#FBE18A"/><stop offset="0.21" stopColor="#FCBB45"/><stop offset="0.38" stopColor="#F75274"/><stop offset="0.52" stopColor="#D53692"/><stop offset="0.74" stopColor="#8F39CE"/><stop offset="1" stopColor="#5B4FE9"/></linearGradient></defs></svg>
    );
  if (type === "tiktok")
    return (
      <svg width="40" height="40" viewBox="0 0 36 36" fill="none"><rect width="36" height="36" rx="9" fill="black"/><path fillRule="evenodd" clipRule="evenodd" d="M21.8882 15.5523C23.0939 16.4102 24.5378 16.8686 26.0171 16.863V13.9286C25.7263 13.9294 25.4363 13.8982 25.1523 13.8357V16.1734C23.6696 16.1761 22.2236 15.7124 21.0184 14.8481V20.8832C21.0147 21.8735 20.7434 22.8444 20.2332 23.6928C19.7229 24.5413 18.9927 25.2358 18.1201 25.7025C17.2475 26.1693 16.2649 26.3911 15.2766 26.3442C14.2882 26.2974 13.331 25.9837 12.5063 25.4364C13.2691 26.2089 14.2438 26.7374 15.3069 26.9551C16.37 27.1728 17.4737 27.0698 18.4783 26.6593C19.4829 26.2487 20.3431 25.549 20.9501 24.6487C21.5572 23.7485 21.8836 22.6882 21.8882 21.6021V15.5523ZM22.9583 12.5592C22.3451 11.894 21.9689 11.0446 21.8882 10.1432V9.76172H21.0673C21.1687 10.3347 21.3895 10.8799 21.7153 11.3619C22.0411 11.8438 22.4646 12.2518 22.9583 12.5592ZM14.4071 23.1134C14.1226 22.741 13.9483 22.2961 13.9039 21.8294C13.8595 21.3627 13.947 20.8929 14.1562 20.4735C14.3655 20.0541 14.6882 19.7019 15.0876 19.457C15.487 19.2121 15.9471 19.0844 16.4154 19.0883C16.674 19.0882 16.9311 19.1278 17.1777 19.2057V16.1734C16.8894 16.1352 16.5987 16.1189 16.3079 16.1245V18.4818C15.7075 18.2919 15.0575 18.3351 14.4874 18.6029C13.9173 18.8707 13.4688 19.3434 13.2311 19.9271C12.9934 20.5108 12.9839 21.1627 13.2046 21.753C13.4252 22.3434 13.8597 22.8291 14.4218 23.1134H14.4071Z" fill="#EE1D52"/><path fillRule="evenodd" clipRule="evenodd" d="M21.0185 14.8285C22.2237 15.6929 23.6697 16.1565 25.1524 16.1539V13.8161C24.3077 13.6373 23.5403 13.1977 22.9584 12.5592C22.4648 12.2518 22.0413 11.8438 21.7155 11.3619C21.3897 10.8799 21.1689 10.3347 21.0674 9.76172H18.9076V21.6021C18.9056 22.1262 18.7397 22.6365 18.4331 23.0614C18.1265 23.4863 17.6947 23.8044 17.1983 23.9711C16.7018 24.1378 16.1657 24.1447 15.6651 23.9909C15.1646 23.8371 14.7247 23.5302 14.4073 23.1133C13.9043 22.8593 13.5014 22.443 13.2637 21.9317C13.0261 21.4204 12.9674 20.8439 13.0973 20.2951C13.2272 19.7464 13.538 19.2574 13.9795 18.9071C14.4211 18.5568 14.9677 18.3657 15.5312 18.3645C15.7897 18.3653 16.0466 18.4049 16.2934 18.4818V16.1245C15.227 16.1502 14.1913 16.4869 13.3134 17.0933C12.4355 17.6998 11.7536 18.5496 11.3515 19.5385C10.9493 20.5274 10.8444 21.6123 11.0496 22.66C11.2547 23.7077 11.7611 24.6727 12.5065 25.4364C13.3313 25.9876 14.2901 26.3045 15.2806 26.3534C16.2712 26.4023 17.2564 26.1814 18.1314 25.7141C19.0064 25.2469 19.7384 24.5508 20.2494 23.7001C20.7604 22.8494 21.0313 21.8758 21.0332 20.8832L21.0185 14.8285Z" fill="white"/><path fillRule="evenodd" clipRule="evenodd" d="M25.1525 13.8163V13.1854C24.3768 13.1887 23.616 12.9716 22.9586 12.5594C23.5389 13.1997 24.307 13.6397 25.1525 13.8163ZM21.0675 9.76191C21.0675 9.64942 21.0333 9.53205 21.0187 9.41956V9.03809H18.038V20.8834C18.0354 21.5466 17.77 22.1818 17.3001 22.6494C16.8301 23.117 16.194 23.3789 15.5313 23.3776C15.1411 23.3796 14.756 23.2891 14.4074 23.1135C14.7249 23.5304 15.1647 23.8372 15.6653 23.9911C16.1659 24.1449 16.702 24.138 17.1984 23.9713C17.6949 23.8046 18.1267 23.4865 18.4333 23.0616C18.7398 22.6367 18.9058 22.1264 18.9078 21.6023V9.76191H21.0675ZM16.2936 16.1198V15.4498C15.067 15.283 13.8202 15.537 12.7564 16.1702C11.6925 16.8035 10.8743 17.7787 10.435 18.937C9.99583 20.0953 9.96153 21.3683 10.3377 22.5486C10.7139 23.7289 11.4784 24.7469 12.5066 25.4366C11.7669 24.6711 11.2659 23.7065 11.0649 22.6607C10.8639 21.6149 10.9716 20.5331 11.3748 19.5476C11.778 18.562 12.4593 17.7153 13.3354 17.1109C14.2115 16.5066 15.2445 16.1707 16.3082 16.1443L16.2936 16.1198Z" fill="#69C9D0"/></svg>
    );
  return null;
}

const requirements = [
  "Требование 1",
  "Требование 2",
  "Требование 3",
  "Требование 4",
  "Требование 5",
];

interface ModalOfferProps {
  open: boolean;
  offer: OfferCardProps | null;
  onClose: () => void;
}

function getRocketSVG(percent: number) {
    if (percent === 0) {
      return (
        <svg width="60" height="179" viewBox="0 0 60 179" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="60" height="179" rx="16" fill="#282828"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M20.7238 159.735C18.5875 147.876 26.3006 140.304 30.4242 138C39.9094 143.414 41.1128 154.563 40.5288 159.461C41.4765 157.599 41.7152 155.857 41.7162 155.218C47.0718 159.5 47.3436 164.001 46.81 165.716L38.7619 165.646L36.9583 169L24.1992 168.731L22.4457 165.669L14.0679 165.654C13.4601 160.49 17.0844 156.458 18.9726 155.087C19.1889 157.45 20.2302 159.171 20.7238 159.735ZM28.1997 147.455C26.9387 148.711 26.9358 150.744 28.1931 151.997C29.4504 153.249 31.4919 153.246 32.7528 151.99C34.0138 150.734 34.0168 148.701 32.7594 147.449C31.5021 146.197 29.4606 146.2 28.1997 147.455Z" fill="white"/>
          <path d="M80.68 153.5C80.68 154.62 80.79 155.65 81.01 156.59C81.23 157.53 81.54 158.34 81.94 159.02C82.36 159.7 82.86 160.23 83.44 160.61C84.02 160.97 84.66 161.15 85.36 161.15C86.1 161.15 86.75 160.97 87.31 160.61C87.89 160.23 88.38 159.7 88.78 159.02C89.2 158.34 89.52 157.53 89.74 156.59C89.96 155.65 90.07 154.62 90.07 153.5C90.07 152.38 89.96 151.35 89.74 150.41C89.52 149.47 89.2 148.66 88.78 147.98C88.38 147.3 87.89 146.78 87.31 146.42C86.75 146.04 86.1 145.85 85.36 145.85C84.66 145.85 84.02 146.04 83.44 146.42C82.86 146.78 82.36 147.3 81.94 147.98C81.54 148.66 81.23 149.47 81.01 150.41C80.79 151.35 80.68 152.38 80.68 153.5ZM77.2 153.5C77.2 151.32 77.54 149.42 78.22 147.8C78.92 146.18 79.88 144.92 81.1 144.02C82.34 143.12 83.76 142.67 85.36 142.67C87 142.67 88.43 143.12 89.65 144.02C90.89 144.92 91.85 146.18 92.53 147.8C93.21 149.42 93.55 151.32 93.55 153.5C93.55 155.68 93.21 157.58 92.53 159.2C91.85 160.82 90.89 162.08 89.65 162.98C88.43 163.88 87 164.33 85.36 164.33C83.76 164.33 82.34 163.88 81.1 162.98C79.88 162.08 78.92 160.82 78.22 159.2C77.54 157.58 77.2 155.68 77.2 153.5ZM95.65 147.68C95.65 146.74 95.86 145.89 96.28 145.13C96.72 144.35 97.33 143.73 98.11 143.27C98.89 142.81 99.77 142.58 100.75 142.58C101.77 142.58 102.66 142.81 103.42 143.27C104.2 143.73 104.8 144.35 105.22 145.13C105.66 145.89 105.88 146.74 105.88 147.68C105.88 148.62 105.66 149.48 105.22 150.26C104.8 151.02 104.2 151.63 103.42 152.09C102.66 152.55 101.77 152.78 100.75 152.78C99.77 152.78 98.89 152.55 98.11 152.09C97.33 151.63 96.72 151.02 96.28 150.26C95.86 149.48 95.65 148.62 95.65 147.68ZM98.41 147.68C98.41 148.12 98.51 148.54 98.71 148.94C98.91 149.32 99.18 149.63 99.52 149.87C99.88 150.09 100.29 150.2 100.75 150.2C101.25 150.2 101.67 150.09 102.01 149.87C102.35 149.63 102.62 149.32 102.82 148.94C103.02 148.54 103.12 148.12 103.12 147.68C103.12 147.22 103.02 146.8 102.82 146.42C102.62 146.04 102.35 145.74 102.01 145.52C101.67 145.3 101.25 145.19 100.75 145.19C100.29 145.19 99.88 145.3 99.52 145.52C99.18 145.74 98.91 146.04 98.71 146.42C98.51 146.8 98.41 147.22 98.41 147.68ZM108.16 159.32C108.16 158.36 108.38 157.5 108.82 156.74C109.26 155.96 109.86 155.35 110.62 154.91C111.4 154.45 112.29 154.22 113.29 154.22C114.29 154.22 115.17 154.45 115.93 154.91C116.71 155.35 117.31 155.96 117.73 156.74C118.17 157.5 118.39 158.36 118.39 159.32C118.39 160.24 118.17 161.09 117.73 161.87C117.31 162.65 116.71 163.27 115.93 163.73C115.17 164.17 114.29 164.39 113.29 164.39C112.29 164.39 111.4 164.17 110.62 163.73C109.86 163.27 109.26 162.65 108.82 161.87C108.38 161.09 108.16 160.24 108.16 159.32ZM110.95 159.29C110.95 159.73 111.04 160.15 111.22 160.55C111.42 160.93 111.69 161.24 112.03 161.48C112.39 161.7 112.81 161.81 113.29 161.81C113.77 161.81 114.18 161.7 114.52 161.48C114.88 161.24 115.15 160.93 115.33 160.55C115.53 160.17 115.63 159.75 115.63 159.29C115.63 158.85 115.53 158.44 115.33 158.06C115.15 157.68 114.88 157.38 114.52 157.16C114.18 156.92 113.77 156.8 113.29 156.8C112.81 156.8 112.39 156.92 112.03 157.16C111.69 157.38 111.42 157.68 111.22 158.06C111.04 158.44 110.95 158.85 110.95 159.29ZM112.69 143H115.9L101.35 164H98.14L112.69 143Z" fill="white"/>
        </svg>
      );
    } else if (percent > 0 && percent <= 25) {
      return (
        <svg width="60" height="179" viewBox="0 0 60 179" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="60" height="179" rx="16" fill="#282828"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M20.7238 142.735C18.5875 130.876 26.3006 123.304 30.4242 121C39.9094 126.414 41.1128 137.563 40.5288 142.461C41.4765 140.599 41.7152 138.857 41.7162 138.218C47.0718 142.5 47.3436 147.001 46.81 148.716L38.7619 148.646L36.9583 152L24.1992 151.731L22.4457 148.669L14.0679 148.654C13.4601 143.49 17.0844 139.458 18.9726 138.087C19.1889 140.45 20.2302 142.171 20.7238 142.735ZM28.1997 130.455C26.9387 131.711 26.9358 133.744 28.1931 134.997C29.4504 136.249 31.4919 136.246 32.7528 134.99C34.0138 133.734 34.0168 131.701 32.7594 130.449C31.5021 129.197 29.4606 129.2 28.1997 130.455Z" fill="white"/>
          <path d="M25.0322 160.026C25.4322 156.426 28.5322 155.859 30.0322 156.026C32.0321 155.826 34.0322 157.526 34.5322 159.526C35.0322 161.526 34.0322 164.526 32.0322 166.526C30.4322 168.126 29.6989 170.192 29.5322 171.026C30.0322 165.026 24.5322 164.526 25.0322 160.026Z" fill="url(#paint0_linear_410_85915)"/>
          <defs>
            <linearGradient id="paint0_linear_410_85915" x1="30" y1="156" x2="31.3767" y2="165.53" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
          </defs>
        </svg>
      );
    } else if (percent > 25 && percent <= 50) {
      return (
        <svg width="60" height="179" viewBox="0 0 60 179" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="60" height="179" rx="16" fill="#282828"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M20.7238 95.7353C18.5875 83.8764 26.3006 76.3039 30.4242 74C39.9094 79.4139 41.1128 90.5628 40.5288 95.4605C41.4765 93.5989 41.7152 91.8568 41.7162 91.2185C47.0718 95.5003 47.3436 100.001 46.81 101.716L38.7619 101.646L36.9583 105L24.1992 104.731L22.4457 101.669L14.0679 101.654C13.4601 96.4898 17.0844 92.4577 18.9726 91.0871C19.1889 93.4504 20.2302 95.1706 20.7238 95.7353ZM28.1997 83.4554C26.9387 84.7113 26.9358 86.7444 28.1931 87.9966C29.4504 89.2488 31.4919 89.2459 32.7528 87.9901C34.0138 86.7343 34.0168 84.701 32.7594 83.4488C31.5021 82.1966 29.4606 82.1996 28.1997 83.4554Z" fill="white"/>
          <path d="M18.0743 117.532C21.1185 111.09 28.0403 109.837 31.1207 110.016C33.4763 110.195 38.8399 111.626 41.4491 115.921C44.7107 121.289 42.5363 132.026 37.644 135.784C33.7301 138.79 28.7652 145.984 26.772 149.205C27.3156 146.521 25.6848 145.447 25.1412 142.763C24.5976 140.079 27.3156 135.784 24.5976 135.247C22.4232 134.818 21.1548 136.142 20.7923 136.858C21.8795 130.952 14.2692 125.584 18.0743 117.532Z" fill="url(#paint0_linear_410_85921)"/>
          <path d="M35.4696 142.226C35.4107 142.313 35.3441 142.41 35.2706 142.514C33.2841 145.524 33.1197 149.982 33.2952 151.889C33.2952 153.142 32.969 156.506 31.6644 159.941C30.3598 163.377 27.4968 166.026 26.2284 166.92C23.5104 162.626 24.5976 156.184 25.6848 155.647C26.772 155.11 27.3156 156.72 28.9464 156.184C30.5772 155.647 28.9464 148.668 31.1208 147.057C32.7189 145.874 34.4394 143.693 35.2706 142.514C35.335 142.416 35.4013 142.32 35.4696 142.226Z" fill="url(#paint1_linear_410_85921)"/>
          <path d="M20.7924 171.752C19.0529 170.893 18.6181 166.741 18.6181 164.773C22.0971 166.92 22.9668 169.247 22.9668 170.141C22.9668 171.036 22.532 172.611 20.7924 171.752Z" fill="url(#paint2_linear_410_85921)"/>
          <defs>
            <linearGradient id="paint0_linear_410_85921" x1="30.4581" y1="110" x2="39.4144" y2="150.442" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
            <linearGradient id="paint1_linear_410_85921" x1="30.4581" y1="110" x2="39.4144" y2="150.442" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
            <linearGradient id="paint2_linear_410_85921" x1="30.4581" y1="110" x2="39.4144" y2="150.442" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
          </defs>
        </svg>
      );
    } else if (percent > 50 && percent <= 75) {
      return (
        <svg width="60" height="179" viewBox="0 0 60 179" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="60" height="179" rx="16" fill="#282828"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M20.7238 31.7353C18.5875 19.8764 26.3006 12.3039 30.4242 10C39.9094 15.4139 41.1128 26.5628 40.5288 31.4605C41.4765 29.5989 41.7152 27.8568 41.7162 27.2185C47.0718 31.5003 47.3436 36.0011 46.81 37.7162L38.7619 37.6457L36.9583 41L24.1992 40.7307L22.4457 37.6692L14.0679 37.6539C13.4601 32.4898 17.0844 28.4577 18.9726 27.0871C19.1889 29.4504 20.2302 31.1706 20.7238 31.7353ZM28.1997 19.4554C26.9387 20.7113 26.9358 22.7444 28.1931 23.9966C29.4504 25.2488 31.4919 25.2459 32.7528 23.9901C34.0138 22.7343 34.0168 20.701 32.7594 19.4488C31.5021 18.1966 29.4606 18.1996 28.1997 19.4554Z" fill="white"/>
          <path d="M11.4256 53.4972C16.1314 47.8269 25.5383 47 29.6606 47C36.131 47 45.3073 49.717 49.0719 55.8599C53.7778 63.5384 53.7778 70.0356 50.2484 78.8955C46.719 87.7554 49.6602 85.3927 50.2484 94.8433C50.8366 104.294 41.425 106.656 39.0721 111.972C36.7192 117.288 42.6015 126.148 38.4839 133.236C34.3663 140.324 36.131 142.096 35.5427 148.002C35.0722 152.728 30.2487 157.453 27.8958 159.225C28.8762 156.075 30.2487 149.066 27.8958 146.23C24.9547 142.687 25.5429 138.552 26.1311 136.78C26.6017 135.362 26.7194 130.676 26.7194 128.511C26.7194 130.873 24.3665 133.827 24.3665 136.189C24.3665 138.079 23.5822 140.521 23.19 141.505C24.3665 136.78 15.5431 135.599 17.896 129.101C20.2489 122.604 17.896 120.832 14.9548 117.288C12.0137 113.744 7.3079 107.838 14.3666 93.6619C21.4253 79.4862 13.1903 77.7142 9.66091 74.1703C6.13156 70.6263 5.54333 60.5851 11.4256 53.4972Z" fill="url(#paint0_linear_410_85927)"/>
          <path d="M48.4837 107.247C52.2484 103.939 52.9935 99.9623 52.6013 98.3872C55.4248 102.167 55.3848 105.475 54.366 107.247C50.2484 112.563 49.0719 114.335 49.6602 117.879C50.1307 120.714 48.8759 122.604 48.4837 123.785C49.0719 121.423 43.7779 111.382 48.4837 107.247Z" fill="url(#paint1_linear_410_85927)"/>
          <path d="M23.19 152.137C23.6606 154.5 22.2096 156.665 21.4253 157.453C19.6606 158.634 19.0724 156.862 19.6606 156.272C20.2489 155.681 20.2489 153.909 19.0724 152.728C17.896 151.546 17.896 149.774 19.0724 149.184C20.2489 148.593 22.6018 149.184 23.19 152.137Z" fill="url(#paint2_linear_410_85927)"/>
          <path d="M24.9547 170.447C23.0724 169.03 24.1704 165.919 24.9547 164.541C25.3468 165.328 26.3664 167.14 27.3076 168.085C28.484 169.266 27.3076 172.219 24.9547 170.447Z" fill="url(#paint3_linear_410_85927)"/>
          <defs>
            <linearGradient id="paint0_linear_410_85927" x1="31.6101" y1="47" x2="49.8535" y2="122.32" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
            <linearGradient id="paint1_linear_410_85927" x1="31.6101" y1="47" x2="49.8535" y2="122.32" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
            <linearGradient id="paint2_linear_410_85927" x1="31.6101" y1="47" x2="49.8535" y2="122.32" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
            <linearGradient id="paint3_linear_410_85927" x1="31.6101" y1="47" x2="49.8535" y2="122.32" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
          </defs>
        </svg>
      );
    } else if (percent > 75) {
      return (
        <svg width="60" height="179" viewBox="0 0 60 179" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="60" height="179" rx="16" fill="url(#paint0_linear_410_85935)"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M20.7238 31.7353C18.5875 19.8764 26.3006 12.3039 30.4242 10C39.9094 15.4139 41.1128 26.5628 40.5288 31.4605C41.4765 29.5989 41.7152 27.8568 41.7162 27.2185C47.0718 31.5003 47.3436 36.0011 46.81 37.7162L38.7619 37.6457L36.9583 41L24.1992 40.7307L22.4457 37.6692L14.0679 37.6539C13.4601 32.4898 17.0844 28.4577 18.9726 27.0871C19.1889 29.4504 20.2302 31.1706 20.7238 31.7353ZM28.1997 19.4554C26.9387 20.7113 26.9358 22.7444 28.1931 23.9966C29.4504 25.2488 31.4919 25.2459 32.7528 23.9901C34.0138 22.7343 34.0168 20.701 32.7594 19.4488C31.5021 18.1966 29.4606 18.1996 28.1997 19.4554Z" fill="white"/>
          <defs>
            <linearGradient id="paint0_linear_410_85935" x1="31.0571" y1="0" x2="77.1157" y2="166.239" gradientUnits="userSpaceOnUse">
              <stop stopColor="#FF4400"/>
              <stop offset="1" stopColor="#FF883D"/>
            </linearGradient>
          </defs>
        </svg>
      );
    }
    return null;
  }
  

export default function ModalOffer({ open, offer, onClose }: ModalOfferProps) {
  if (!open || !offer) return null;
  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80" onClick={onClose}>
      <motion.div
        initial={{ opacity: 0, scale: 0.97 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.97 }}
        transition={{ duration: 0.25, ease: "easeOut" }}
        className="relative w-full max-w-md sm:max-w-[420px] bg-[#191919] rounded-2xl shadow-2xl overflow-hidden border border-[#232323] max-h-[calc(100vh-64px)] sm:max-h-[90vh] flex flex-col"
        style={{overflowY: 'auto'}}
        onClick={e => e.stopPropagation()}
      >
        {/* Картинка сверху */}
        <div className="relative w-full h-[160px] bg-black-02">
          <Image src={offer.logo} alt="logo" fill className="object-cover w-full h-full" />
          <button onClick={onClose} className="absolute top-3 right-3 text-white bg-black-03 bg-opacity-70 rounded-full w-9 h-9 flex items-center justify-center text-2xl hover:bg-opacity-100 transition">
            ×
          </button>
        </div>
        {/* Контент */}
        <div className="p-4 flex flex-col gap-3 flex-1 scrollbar-thin scrollbar-thumb-black-03">
          <div className="flex items-center gap-3">
            <Image src={offer.avatar} alt="avatar" width={40} height={40} className="rounded-full w-10 h-10" />
            <div>
              <div className="text-white font-bold text-lg leading-tight">{offer.user}</div>
              <div className="text-gray-400 text-xs">{offer.deadline}</div>
            </div>
            <div className="ml-auto flex items-center gap-1 bg-[#232323] rounded-lg px-2 py-0.5">
              <span className="text-orange-400 text-xs font-bold">★</span>
              <span className="text-white text-xs font-semibold ml-1">{offer.rating.toFixed(1)}</span>
            </div>
          </div>
          <div className="text-white font-bold text-xl mt-2 mb-1 leading-tight">{offer.title}</div>
          {/* Rocket + stats */}
          <div className="flex items-center gap-3">
            <div className="flex flex-col items-center min-w-[60px]">
              {getRocketSVG(offer.percent)}
              <span className="text-white font-extrabold text-lg mt-1">{offer.percent}%</span>
            </div>
            <div className="flex-1 flex flex-col gap-1">
              <div className="flex items-center bg-[#232323] rounded-xl px-3 py-1">
                <span className="text-white text-[13px] font-bold">{offer.current}</span>
                <span className="text-gray-400 text-[13px] font-semibold ml-2">из {offer.total}</span>
              </div>
              <div className="flex items-center bg-[#232323] rounded-xl px-3 py-1">
                <span className="text-orange-400 text-[13px] font-bold">{offer.price} <span className="text-white">/ 1K</span></span>
                <span className="text-gray-400 text-[13px] font-semibold ml-2">просмотров</span>
              </div>
              <div className="flex items-center bg-[#232323] rounded-xl px-3 py-1">
                <span className="text-gray-400 text-[13px] font-semibold">Выплаты с </span>
                <span className="text-orange-400 text-[13px] font-bold ml-1">{offer.minViews}</span>
                <span className="text-gray-400 text-[13px] font-semibold ml-1">просмотров</span>
              </div>
            </div>
          </div>
          {/* Соцсети */}
          <div className="flex gap-2 mt-2">
            {offer.socials.map((s) => (
              <span key={s}><SocialIcon type={s} /></span>
            ))}
          </div>
          {/* Категория и материалы */}
          <div className="flex gap-2 mt-2">
            <div className="bg-[#232323] rounded-xl px-3 py-1 text-white text-sm">E-commerce</div>
            <a href="https://drive.google.com/drive/folders/1Qn4dh6JH7gs" target="_blank" rel="noopener noreferrer" className="bg-[#232323] rounded-xl px-3 py-1 text-white text-sm underline">https://drive.google.com/...</a>
          </div>
          {/* Требования */}
          <div className="flex flex-wrap gap-2 mt-2">
            {requirements.map((req, i) => (
              <div key={i} className="bg-[#232323] rounded-xl px-3 py-1 text-white text-sm">{req}</div>
            ))}
          </div>
          {/* Ссылки на клипы */}
          <div className="mt-2">
            <input className="w-full rounded-xl bg-black-03 px-4 py-2 text-white placeholder:text-gray-400 outline-none" placeholder="Вставьте ссылку на клип" />
          </div>
          <button className="flex items-center gap-2 text-orange-400 font-semibold mt-2">
            <span className="text-2xl">+</span> Еще клип
          </button>
          <button className="w-full bg-gradient-to-r from-[#FF4400] to-[#FF883D] text-white font-semibold px-6 py-3 rounded-xl mt-4 hover:opacity-90 transition text-lg flex items-center justify-center">
            Отправить клип на проверку
          </button>
        </div>
      </motion.div>
    </div>
  );
} 